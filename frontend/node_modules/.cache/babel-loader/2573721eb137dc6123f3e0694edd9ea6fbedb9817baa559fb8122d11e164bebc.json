{"ast":null,"code":"/**\n * AstroBot API Service\n * Handles all communication with the backend API\n */\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\nclass AstroBotAPI {\n  constructor() {\n    this.baseURL = API_BASE_URL;\n  }\n\n  /**\n   * Send a chat message to the backend\n   * @param {string} message - User message\n   * @param {Object} chartData - Optional chart data (for context)\n   * @returns {Promise<Object>} API response\n   */\n  async sendChatMessage(message, chartData = null) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 20000);\n      const response = await fetch(`${this.baseURL}/api/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: message,\n          chart_data: chartData\n        }),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error sending chat message:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate Kundli chart\n   * @param {Object} birthDetails - Birth details\n   * @returns {Promise<Object>} Kundli data\n   */\n  async generateKundli(birthDetails) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 30000);\n      const response = await fetch(`${this.baseURL}/api/kundli`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(birthDetails),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error generating Kundli:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate visual chart only\n   * @param {Object} birthDetails - Birth details\n   * @returns {Promise<Object>} Chart data\n   */\n  async generateChart(birthDetails) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 30000);\n      const response = await fetch(`${this.baseURL}/api/chart`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(birthDetails),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error generating chart:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Analyze chart data\n   * @param {Object} chartData - Chart data to analyze\n   * @returns {Promise<Object>} Analysis result\n   */\n  async analyzeKundli(chartData) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 20000);\n      const response = await fetch(`${this.baseURL}/api/analyze`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          chart_data: chartData\n        }),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error analyzing Kundli:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Send form data to backend to store in Google Sheets\n   * @param {Object} formData - {name, dob, tob, place, timezone}\n   */\n  async sendFormData(formData) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 15000);\n      const response = await fetch(`${this.baseURL}/api/form-submit`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n      if (!response.ok) {\n        const text = await response.text();\n        throw new Error(`Form submit failed: ${response.status} ${text}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error submitting form data:', error);\n      // Don't throw hard error to avoid blocking UX; return {success:false}\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Get coordinates for a place\n   * @param {string} place - Place name\n   * @returns {Promise<Object>} Coordinates data\n   */\n  async getCoordinates(place) {\n    try {\n      const response = await fetch(`${this.baseURL}/api/coordinates/${encodeURIComponent(place)}`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error getting coordinates:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Check if the backend is healthy\n   * @returns {Promise<Object>} Health status\n   */\n  async checkHealth() {\n    try {\n      const response = await fetch(`${this.baseURL}/api/health`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error checking health:', error);\n      throw error;\n    }\n  }\n}\n\n// Create and export API instance\nconst astroBotAPI = new AstroBotAPI();\nexport default astroBotAPI;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","AstroBotAPI","constructor","baseURL","sendChatMessage","message","chartData","controller","AbortController","timeout","setTimeout","abort","response","fetch","method","headers","body","JSON","stringify","chart_data","signal","clearTimeout","ok","Error","status","json","error","console","generateKundli","birthDetails","generateChart","analyzeKundli","sendFormData","formData","text","success","getCoordinates","place","encodeURIComponent","checkHealth","astroBotAPI"],"sources":["D:/Downloads/astro-main/frontend/src/services/api.js"],"sourcesContent":["/**\n * AstroBot API Service\n * Handles all communication with the backend API\n */\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\nclass AstroBotAPI {\n  constructor() {\n    this.baseURL = API_BASE_URL;\n  }\n\n  /**\n   * Send a chat message to the backend\n   * @param {string} message - User message\n   * @param {Object} chartData - Optional chart data (for context)\n   * @returns {Promise<Object>} API response\n   */\n  async sendChatMessage(message, chartData = null) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 20000);\n      const response = await fetch(`${this.baseURL}/api/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          message: message,\n          chart_data: chartData\n        }),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error sending chat message:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate Kundli chart\n   * @param {Object} birthDetails - Birth details\n   * @returns {Promise<Object>} Kundli data\n   */\n  async generateKundli(birthDetails) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 30000);\n      const response = await fetch(`${this.baseURL}/api/kundli`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(birthDetails),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error generating Kundli:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate visual chart only\n   * @param {Object} birthDetails - Birth details\n   * @returns {Promise<Object>} Chart data\n   */\n  async generateChart(birthDetails) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 30000);\n      const response = await fetch(`${this.baseURL}/api/chart`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(birthDetails),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error generating chart:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Analyze chart data\n   * @param {Object} chartData - Chart data to analyze\n   * @returns {Promise<Object>} Analysis result\n   */\n  async analyzeKundli(chartData) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 20000);\n      const response = await fetch(`${this.baseURL}/api/analyze`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          chart_data: chartData\n        }),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error analyzing Kundli:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Send form data to backend to store in Google Sheets\n   * @param {Object} formData - {name, dob, tob, place, timezone}\n   */\n  async sendFormData(formData) {\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 15000);\n      const response = await fetch(`${this.baseURL}/api/form-submit`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n        signal: controller.signal\n      });\n      clearTimeout(timeout);\n\n      if (!response.ok) {\n        const text = await response.text();\n        throw new Error(`Form submit failed: ${response.status} ${text}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error submitting form data:', error);\n      // Don't throw hard error to avoid blocking UX; return {success:false}\n      return { success: false, error: error.message };\n    }\n  }\n\n  /**\n   * Get coordinates for a place\n   * @param {string} place - Place name\n   * @returns {Promise<Object>} Coordinates data\n   */\n  async getCoordinates(place) {\n    try {\n      const response = await fetch(`${this.baseURL}/api/coordinates/${encodeURIComponent(place)}`);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error getting coordinates:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Check if the backend is healthy\n   * @returns {Promise<Object>} Health status\n   */\n  async checkHealth() {\n    try {\n      const response = await fetch(`${this.baseURL}/api/health`);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error checking health:', error);\n      throw error;\n    }\n  }\n}\n\n// Create and export API instance\nconst astroBotAPI = new AstroBotAPI();\nexport default astroBotAPI;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}